<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#1A1A2E">
  <title>Deal Triage‚Ñ¢ Tool | Oney & Co</title>
  <meta name="description" content="Answer 13 questions. Get a traffic-light assessment of your commercial deal ‚Äî the same framework banks use internally.">
  <link rel="canonical" href="https://mentor.oneyco.com.au/triage.html">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%236B4C9A'/><stop offset='100%25' stop-color='%239B59B6'/></linearGradient></defs><circle cx='50' cy='50' r='42' fill='none' stroke='url(%23g)' stroke-width='8'/><text x='50' y='68' text-anchor='middle' font-size='48' font-weight='bold' fill='url(%23g)'>M</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #1A1A2E;
      --bg-secondary: #16162A;
      --card: #252540;
      --border: #3D3D5C;
      --accent: #9B59B6;
      --accent-light: #B08AE0;
      --accent-lighter: #C4A3F0;
      --accent-glow: rgba(155, 114, 208, 0.12);
      --green: #2ECC85;
      --green-dark: #1FAD73;
      --text: #ffffff;
      --text-muted: #a3a3b8;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --info: #3b82f6;
      --purple-gradient: linear-gradient(135deg, #6B4C9A, #9B59B6);
      --green-gradient: linear-gradient(135deg, #2ECC85, #1FAD73);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }
    .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }

    /* Top Bar */
    .top-bar {
      display: flex; align-items: center; justify-content: space-between;
      padding: 16px 20px; max-width: 800px; margin: 0 auto;
    }
    .top-bar-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
    .top-bar-logo svg { height: 36px; width: auto; }
    .nav-links { display:flex;align-items:center;gap:20px;list-style:none; }
    .nav-links a { color:var(--text-muted);text-decoration:none;font-size:13px;font-weight:500;transition:color 0.2s; }
    .nav-links a:hover { color:var(--accent); }
    .nav-links a.nav-active { color:var(--accent); }
    @media(max-width:768px){.nav-links{display:none;}}

    /* Section */
    .section { padding: 60px 0; }
    .section-title {
      font-size: 28px; font-weight: 800; margin-bottom: 12px; text-align: center;
      background: var(--purple-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .section-subtitle { text-align: center; color: var(--text-muted); font-size: 16px; margin-bottom: 40px; max-width: 560px; margin-left: auto; margin-right: auto; }

    .btn-cta {
      display: inline-block; padding: 16px 32px; border-radius: 100px;
      font-size: 17px; font-weight: 600; cursor: pointer; border: none; text-decoration: none;
      background: var(--purple-gradient); color: #fff; transition: all 0.2s;
    }
    .btn-cta:hover { opacity: 0.9; transform: translateY(-2px); }

    /* Triage Tool */
    .triage-container {
      background: var(--card); border: 1px solid var(--border); border-radius: 20px;
      padding: 32px; margin-top: 20px;
    }
    .triage-progress { display: flex; gap: 6px; margin-bottom: 32px; }
    .triage-progress-dot {
      flex: 1; height: 6px; border-radius: 3px; background: var(--border); transition: background 0.3s;
    }
    .triage-progress-dot.active { background: var(--accent); }
    .triage-progress-dot.done { background: var(--success); }

    .triage-step { display: none; animation: fadeIn 0.3s ease; }
    .triage-step.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .triage-step-label {
      font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
      color: var(--accent); margin-bottom: 8px;
    }
    .triage-step-title { font-size: 22px; font-weight: 700; margin-bottom: 24px; }

    .triage-question { margin-bottom: 24px; }
    .triage-question-label { font-size: 15px; font-weight: 600; margin-bottom: 12px; }

    .option-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .option-cards.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
    .option-cards.cols-1 { grid-template-columns: 1fr; }
    .option-card {
      background: var(--card); border: 2px solid var(--border); border-radius: 12px;
      padding: 16px; cursor: pointer; transition: all 0.2s; text-align: center;
      font-size: 14px; font-weight: 500;
    }
    .option-card:hover { border-color: var(--accent); background: rgba(107,76,154,0.04); }
    .option-card.selected { border-color: var(--accent); background: rgba(107,76,154,0.06); box-shadow: 0 0 0 3px rgba(107,76,154,0.1); }

    .btn-row { display: flex; gap: 12px; margin-top: 32px; }
    .btn { flex: 1; padding: 14px 24px; border-radius: 100px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; text-align: center; }
    .btn-primary { background: var(--purple-gradient); color: #fff; }
    .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .btn-secondary { background: var(--card); color: var(--text); border: 1px solid var(--border); }
    .btn-secondary:hover { border-color: var(--accent); }

    /* Results */
    .result-card {
      background: var(--card); border-radius: 20px; padding: 28px;
      margin-bottom: 20px; border: 1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .pillar-results { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
    .pillar-result {
      display: flex; align-items: center; gap: 12px; padding: 16px;
      background: var(--bg-secondary); border-radius: 12px;
    }
    .pillar-light { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0; }
    .light-green { background: rgba(34,197,94,0.2); border: 2px solid var(--success); }
    .light-amber { background: rgba(245,158,11,0.2); border: 2px solid var(--warning); }
    .light-red { background: rgba(239,68,68,0.2); border: 2px solid var(--danger); }
    .pillar-result-text { font-size: 14px; font-weight: 600; }
    .pillar-result-detail { font-size: 12px; color: var(--text-muted); }

    .overall-result { text-align: center; padding: 24px; }
    .overall-light { width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 36px; }
    .overall-label { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
    .overall-message { font-size: 15px; color: var(--text-muted); max-width: 480px; margin: 0 auto; }

    .result-cta-card {
      text-align: center; padding: 32px; background: var(--card); border: 2px solid var(--accent);
      border-radius: 20px; margin-top: 24px;
    }
    .result-cta-card h3 { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
    .result-cta-card p { color: var(--text-muted); margin-bottom: 20px; }

    /* Footer */
    .footer {
      border-top: 1px solid var(--border); padding: 40px 20px; text-align: center;
      font-size: 13px; color: var(--text-muted);
    }
    .footer a { color: var(--accent); text-decoration: none; }
    .footer a:hover { text-decoration: underline; }
    .footer-links { margin-bottom: 12px; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
    .footer-contact { margin-bottom: 16px; }

    /* Back link */
    .back-link {
      display: inline-flex; align-items: center; gap: 6px; color: var(--text-muted);
      text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 20px; transition: color 0.2s;
    }
    .back-link:hover { color: var(--accent); }

    @media (max-width: 640px) {
      .section-title { font-size: 24px; }
      .pillar-results { grid-template-columns: 1fr; }
      .option-cards.cols-3 { grid-template-columns: 1fr 1fr; }
      .triage-container { padding: 20px; }
      .btn-row { flex-direction: column; }
      .container { padding: 0 16px; }
    }
  </style>
</head>
<body>

  <!-- Top Bar -->
  <div class="top-bar">
    <a href="https://oneyco.com.au" class="top-bar-logo">
      <svg viewBox="0 0 210 90" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="fillGrad" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" style="stop-color:#1FAD73"/><stop offset="55%" style="stop-color:#2ECC85"/><stop offset="55%" style="stop-color:transparent"/><stop offset="100%" style="stop-color:transparent"/></linearGradient>
            <linearGradient id="strokeGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#2ECC85"/><stop offset="100%" style="stop-color:#1FAD73"/></linearGradient>
          </defs>
          <g transform="translate(40, 45)"><circle cx="0" cy="0" r="32" fill="none" stroke="url(#strokeGrad)" stroke-width="7"/><circle cx="0" cy="0" r="24" fill="url(#fillGrad)"/></g>
          <text x="82" y="52" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="600" fill="#ffffff" letter-spacing="-0.5">ney</text>
          <text x="129" y="52" font-family="Inter, system-ui, sans-serif" font-size="21" font-weight="500" fill="url(#strokeGrad)">&amp;</text>
          <text x="148" y="52" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="600" fill="#ffffff" letter-spacing="-0.5">co</text>
          <circle cx="182" cy="48" r="4" fill="#6B4C9A"/>
        </svg>
    </a>
    <ul class="nav-links">
        <li><a href="https://oneyco.com.au">Home</a></li>
        <li><a href="https://oneyco.com.au/about.html">About</a></li>
        <li><a href="index.html" class="nav-active">Mentoring</a></li>
        <li><a href="https://tools.oneyco.com.au">Tools</a></li>
        <li><a href="https://fhc.oneyco.com.au">Health Check</a></li>
      </ul>
  </div>

  <!-- Deal Triage Tool -->
  <section class="section" id="triage" style="background: var(--bg-secondary); padding: 60px 0;">
    <div class="container">
      <a href="index.html" class="back-link">‚Üê Back to Mentoring</a>
      <h2 class="section-title">Deal Triage‚Ñ¢ Tool</h2>
      <p class="section-subtitle">Answer 13 questions. Get a traffic-light assessment of your deal ‚Äî the same framework banks use internally.</p>

      <div class="triage-container">
        <div class="triage-progress" id="triageProgress"></div>

        <!-- Gate Check -->
        <div class="triage-step active" id="triageStep0">
          <div class="triage-step-label">Gate Check</div>
          <div class="triage-step-title">Before We Start</div>
          <p style="color:var(--text-muted);font-size:14px;margin-bottom:24px;">These must pass before anything else matters. If either is No, the deal stops here.</p>
          <div class="triage-question">
            <div class="triage-question-label">Is the borrower's credit history clean? (No defaults, judgments, Part IX, bankruptcy)</div>
            <div class="option-cards" data-q="gate_credit">
              <div class="option-card" onclick="triageSelect('gate_credit','yes',this)">‚úÖ Yes</div>
              <div class="option-card" onclick="triageSelect('gate_credit','no',this)">‚ùå No</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Is their ATO/tax position current? (Up to date or on a payment plan)</div>
            <div class="option-cards" data-q="gate_ato">
              <div class="option-card" onclick="triageSelect('gate_ato','yes',this)">‚úÖ Yes</div>
              <div class="option-card" onclick="triageSelect('gate_ato','no',this)">‚ùå No</div>
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-primary" onclick="triageNext(1)">Continue ‚Üí</button>
          </div>
        </div>

        <!-- Pillar 1: The Borrower -->
        <div class="triage-step" id="triageStep1">
          <div class="triage-step-label">Pillar 1 of 4</div>
          <div class="triage-step-title">The Borrower</div>
          <div class="triage-question">
            <div class="triage-question-label">Borrower structure?</div>
            <div class="option-cards cols-3" data-q="p1_structure">
              <div class="option-card" onclick="triageSelect('p1_structure','sole',this)">Sole Trader</div>
              <div class="option-card" onclick="triageSelect('p1_structure','partnership',this)">Partnership</div>
              <div class="option-card" onclick="triageSelect('p1_structure','company',this)">Company</div>
              <div class="option-card" onclick="triageSelect('p1_structure','trust',this)">Trust</div>
              <div class="option-card" onclick="triageSelect('p1_structure','smsf',this)">SMSF</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Personal guarantor involved?</div>
            <div class="option-cards" data-q="p1_guarantor">
              <div class="option-card" onclick="triageSelect('p1_guarantor','yes',this)">Yes</div>
              <div class="option-card" onclick="triageSelect('p1_guarantor','no',this)">No</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Borrower's industry experience?</div>
            <div class="option-cards" data-q="p1_experience">
              <div class="option-card" onclick="triageSelect('p1_experience','expert',this)">Expert<br><span style="font-size:12px;color:var(--text-muted)">10+ years</span></div>
              <div class="option-card" onclick="triageSelect('p1_experience','experienced',this)">Experienced<br><span style="font-size:12px;color:var(--text-muted)">3-10 years</span></div>
              <div class="option-card" onclick="triageSelect('p1_experience','some',this)">Some<br><span style="font-size:12px;color:var(--text-muted)">1-3 years</span></div>
              <div class="option-card" onclick="triageSelect('p1_experience','none',this)">None<br><span style="font-size:12px;color:var(--text-muted)">New to this</span></div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Existing relationship with a lender?</div>
            <div class="option-cards" data-q="p1_relationship">
              <div class="option-card" onclick="triageSelect('p1_relationship','yes',this)">Yes</div>
              <div class="option-card" onclick="triageSelect('p1_relationship','no',this)">No</div>
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-secondary" onclick="triagePrev(0)">‚Üê Back</button>
            <button class="btn btn-primary" onclick="triageNext(2)">Continue ‚Üí</button>
          </div>
        </div>

        <!-- Pillar 2: The Purpose -->
        <div class="triage-step" id="triageStep2">
          <div class="triage-step-label">Pillar 2 of 4</div>
          <div class="triage-step-title">The Purpose</div>
          <div class="triage-question">
            <div class="triage-question-label">What's the purpose of this deal?</div>
            <div class="option-cards cols-3" data-q="p2_purpose">
              <div class="option-card" onclick="triageSelect('p2_purpose','owner_occ',this)">Purchase<br><span style="font-size:12px;color:var(--text-muted)">Owner-occupied</span></div>
              <div class="option-card" onclick="triageSelect('p2_purpose','investment',this)">Purchase<br><span style="font-size:12px;color:var(--text-muted)">Investment</span></div>
              <div class="option-card" onclick="triageSelect('p2_purpose','refinance',this)">Refinance</div>
              <div class="option-card" onclick="triageSelect('p2_purpose','construction',this)">Construction</div>
              <div class="option-card" onclick="triageSelect('p2_purpose','equity',this)">Equity Release</div>
              <div class="option-card" onclick="triageSelect('p2_purpose','expansion',this)">Business Expansion</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Does this deal make commercial sense?</div>
            <div class="option-cards" data-q="p2_sense">
              <div class="option-card" onclick="triageSelect('p2_sense','strong',this)">üí™ Strong</div>
              <div class="option-card" onclick="triageSelect('p2_sense','reasonable',this)">üëç Reasonable</div>
              <div class="option-card" onclick="triageSelect('p2_sense','questionable',this)">ü§î Questionable</div>
              <div class="option-card" onclick="triageSelect('p2_sense','no',this)">üëé Doesn't stack up</div>
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-secondary" onclick="triagePrev(1)">‚Üê Back</button>
            <button class="btn btn-primary" onclick="triageNext(3)">Continue ‚Üí</button>
          </div>
        </div>

        <!-- Pillar 3: The Repayment -->
        <div class="triage-step" id="triageStep3">
          <div class="triage-step-label">Pillar 3 of 4</div>
          <div class="triage-step-title">The Repayment</div>
          <div class="triage-question">
            <div class="triage-question-label">Primary repayment source?</div>
            <div class="option-cards" data-q="p3_source">
              <div class="option-card" onclick="triageSelect('p3_source','business',this)">üíº Business Income</div>
              <div class="option-card" onclick="triageSelect('p3_source','rental',this)">üè¢ Rental Income</div>
              <div class="option-card" onclick="triageSelect('p3_source','payg',this)">üí∞ PAYG Income</div>
              <div class="option-card" onclick="triageSelect('p3_source','mixed',this)">üîÑ Mixed</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Can they service at assessment/buffer rate (+2‚Äì3%)?</div>
            <div class="option-cards" data-q="p3_service">
              <div class="option-card" onclick="triageSelect('p3_service','comfortable',this)">Yes, comfortably</div>
              <div class="option-card" onclick="triageSelect('p3_service','tight',this)">Tight but works</div>
              <div class="option-card" onclick="triageSelect('p3_service','unlikely',this)">Unlikely</div>
              <div class="option-card" onclick="triageSelect('p3_service','unknown',this)">Don't know</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Exit strategy clarity?</div>
            <div class="option-cards cols-3" data-q="p3_exit">
              <div class="option-card" onclick="triageSelect('p3_exit','clear',this)">üéØ Clear</div>
              <div class="option-card" onclick="triageSelect('p3_exit','rough',this)">ü§∑ Rough idea</div>
              <div class="option-card" onclick="triageSelect('p3_exit','none',this)">‚ùå No clear exit</div>
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-secondary" onclick="triagePrev(2)">‚Üê Back</button>
            <button class="btn btn-primary" onclick="triageNext(4)">Continue ‚Üí</button>
          </div>
        </div>

        <!-- Pillar 4: The Security -->
        <div class="triage-step" id="triageStep4">
          <div class="triage-step-label">Pillar 4 of 4</div>
          <div class="triage-step-title">The Security</div>
          <div class="triage-question">
            <div class="triage-question-label">Property type?</div>
            <div class="option-cards cols-3" data-q="p4_type">
              <div class="option-card" onclick="triageSelect('p4_type','commercial',this)">üè¢ Commercial</div>
              <div class="option-card" onclick="triageSelect('p4_type','industrial',this)">üè≠ Industrial</div>
              <div class="option-card" onclick="triageSelect('p4_type','retail',this)">üè™ Retail</div>
              <div class="option-card" onclick="triageSelect('p4_type','mixed',this)">üèóÔ∏è Mixed-use</div>
              <div class="option-card" onclick="triageSelect('p4_type','specialised',this)">‚öôÔ∏è Specialised</div>
              <div class="option-card" onclick="triageSelect('p4_type','rural',this)">üåæ Rural</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Location?</div>
            <div class="option-cards" data-q="p4_location">
              <div class="option-card" onclick="triageSelect('p4_location','cbd',this)">üèôÔ∏è Metro CBD</div>
              <div class="option-card" onclick="triageSelect('p4_location','suburban',this)">üèòÔ∏è Metro Suburban</div>
              <div class="option-card" onclick="triageSelect('p4_location','regional',this)">üå≥ Regional</div>
              <div class="option-card" onclick="triageSelect('p4_location','rural',this)">üåæ Rural</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Estimated LVR range?</div>
            <div class="option-cards" data-q="p4_lvr">
              <div class="option-card" onclick="triageSelect('p4_lvr','lt60',this)">&lt;60%</div>
              <div class="option-card" onclick="triageSelect('p4_lvr','60_70',this)">60‚Äì70%</div>
              <div class="option-card" onclick="triageSelect('p4_lvr','70_75',this)">70‚Äì75%</div>
              <div class="option-card" onclick="triageSelect('p4_lvr','gt75',this)">&gt;75%</div>
            </div>
          </div>
          <div class="triage-question">
            <div class="triage-question-label">Additional security available? (Residential property, cash, other assets)</div>
            <div class="option-cards" data-q="p4_additional">
              <div class="option-card" onclick="triageSelect('p4_additional','yes',this)">Yes</div>
              <div class="option-card" onclick="triageSelect('p4_additional','no',this)">No</div>
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-secondary" onclick="triagePrev(3)">‚Üê Back</button>
            <button class="btn btn-primary" onclick="triageShowResults()">See Results ‚Üí</button>
          </div>
        </div>

        <!-- Results Step -->
        <div class="triage-step" id="triageStepResult">
          <div class="triage-step-label">Results</div>
          <div class="triage-step-title">Your Deal Assessment</div>

          <div class="pillar-results" id="pillarResults"></div>

          <div class="result-card" style="margin-top:0;">
            <div class="overall-result">
              <div class="overall-light" id="overallLight">üü¢</div>
              <div class="overall-label" id="overallLabel"></div>
              <div class="overall-message" id="overallMessage"></div>
            </div>
          </div>

          <div class="result-cta-card" id="resultCta"></div>

          <div class="btn-row" style="margin-top:24px;">
            <button class="btn btn-secondary" onclick="triageReset()">‚Üê Try Another Deal</button>
            <a href="book.html" class="btn btn-primary" style="text-decoration:none;">Book a Mentoring Session ‚Üí</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer" id="contact">
    <div class="footer-contact">
      üìß <a href="mailto:hello@oneyco.com.au">hello@oneyco.com.au</a>
    </div>
    <div class="footer-links">
      <a href="https://oneyco.com.au">Home</a>
      <a href="https://oneyco.com.au/about.html">About</a> ¬∑ <a href="https://tools.oneyco.com.au">Tools</a>
      <a href="https://fhc.oneyco.com.au">Health Check</a> ¬∑ <a href="https://mentor.oneyco.com.au">Mentoring</a>
    </div>
    <p>¬© 2026 Oney & Co. All rights reserved.</p>
  </footer>

  <script>
    const TOTAL_STEPS = 6;
    const triage = {};
    let currentTriageStep = 0;

    (function() {
      const prog = document.getElementById('triageProgress');
      for (let i = 0; i < 5; i++) {
        const dot = document.createElement('div');
        dot.className = 'triage-progress-dot' + (i === 0 ? ' active' : '');
        prog.appendChild(dot);
      }
    })();

    function updateTriageProgress(step) {
      document.querySelectorAll('.triage-progress-dot').forEach((dot, i) => {
        dot.className = 'triage-progress-dot';
        if (i < step) dot.classList.add('done');
        if (i === step) dot.classList.add('active');
      });
    }

    function triageSelect(key, value, el) {
      triage[key] = value;
      el.parentElement.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
    }

    function triageNext(step) {
      if (currentTriageStep === 0) {
        if (triage.gate_credit === 'no' || triage.gate_ato === 'no') { showGateFailResult(); return; }
        if (!triage.gate_credit || !triage.gate_ato) return;
      }
      document.getElementById('triageStep' + currentTriageStep).classList.remove('active');
      currentTriageStep = step;
      document.getElementById('triageStep' + currentTriageStep).classList.add('active');
      updateTriageProgress(step);
      document.getElementById('triage').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function triagePrev(step) {
      document.getElementById('triageStep' + currentTriageStep).classList.remove('active');
      currentTriageStep = step;
      document.getElementById('triageStep' + currentTriageStep).classList.add('active');
      updateTriageProgress(step);
    }

    function triageReset() {
      Object.keys(triage).forEach(k => delete triage[k]);
      document.querySelectorAll('.triage-container .option-card').forEach(c => c.classList.remove('selected'));
      document.getElementById('triageStep' + currentTriageStep).classList.remove('active');
      currentTriageStep = 0;
      document.getElementById('triageStep0').classList.add('active');
      document.getElementById('triageStepResult').classList.remove('active');
      updateTriageProgress(0);
      document.getElementById('triage').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function showGateFailResult() {
      document.getElementById('triageStep' + currentTriageStep).classList.remove('active');
      document.getElementById('triageStepResult').classList.add('active');
      currentTriageStep = 'Result';
      updateTriageProgress(5);

      document.getElementById('pillarResults').innerHTML = `
        <div class="pillar-result" style="grid-column:1/-1;">
          <div class="pillar-light light-red">üî¥</div>
          <div>
            <div class="pillar-result-text">Gate Check Failed</div>
            <div class="pillar-result-detail">${triage.gate_credit === 'no' ? 'Credit history issues' : ''}${triage.gate_credit === 'no' && triage.gate_ato === 'no' ? ' + ' : ''}${triage.gate_ato === 'no' ? 'ATO/tax position issues' : ''}</div>
          </div>
        </div>`;

      const ol = document.getElementById('overallLight');
      ol.className = 'overall-light light-red'; ol.textContent = '‚õî';
      document.getElementById('overallLabel').textContent = 'Deal Cannot Proceed';
      document.getElementById('overallLabel').style.color = 'var(--danger)';
      document.getElementById('overallMessage').textContent = 'Credit and/or tax issues must be resolved before this deal can be submitted to any mainstream lender. Consider non-conforming or private lending as alternatives.';

      document.getElementById('resultCta').innerHTML = `
        <h3>This deal needs work ‚Äî or a different approach.</h3>
        <p>Let's talk about options: non-conforming lenders, restructuring, or when to walk away.</p>
        <a href="book.html" class="btn-cta" style="display:inline-block;margin-top:16px;text-decoration:none;">Book a Session ‚Üí</a>`;
    }

    function scorePillar1() {
      let s = 0;
      if (['sole','company'].includes(triage.p1_structure)) s += 2;
      else if (['trust','partnership'].includes(triage.p1_structure)) s += 1;
      if (triage.p1_guarantor === 'yes') s += 2;
      if (triage.p1_experience === 'expert') s += 3;
      else if (triage.p1_experience === 'experienced') s += 2;
      else if (triage.p1_experience === 'some') s += 1;
      if (triage.p1_relationship === 'yes') s += 2;
      if (s >= 7) return 'green'; if (s >= 4) return 'amber'; return 'red';
    }

    function scorePillar2() {
      let s = 0;
      if (['investment','refinance','owner_occ'].includes(triage.p2_purpose)) s += 2;
      else if (['equity','expansion'].includes(triage.p2_purpose)) s += 1;
      if (triage.p2_sense === 'strong') s += 3;
      else if (triage.p2_sense === 'reasonable') s += 2;
      else if (triage.p2_sense === 'questionable') s += 1;
      if (s >= 4) return 'green'; if (s >= 2) return 'amber'; return 'red';
    }

    function scorePillar3() {
      let s = 0;
      if (['business','rental','mixed'].includes(triage.p3_source)) s += 2; else s += 1;
      if (triage.p3_service === 'comfortable') s += 3;
      else if (triage.p3_service === 'tight') s += 2;
      else if (triage.p3_service === 'unknown') s += 1;
      if (triage.p3_exit === 'clear') s += 2;
      else if (triage.p3_exit === 'rough') s += 1;
      if (s >= 6) return 'green'; if (s >= 4) return 'amber'; return 'red';
    }

    function scorePillar4() {
      let s = 0;
      if (['commercial','industrial'].includes(triage.p4_type)) s += 2;
      else if (['retail','mixed'].includes(triage.p4_type)) s += 1;
      if (['cbd','suburban'].includes(triage.p4_location)) s += 2;
      else if (triage.p4_location === 'regional') s += 1;
      if (triage.p4_lvr === 'lt60') s += 3;
      else if (triage.p4_lvr === '60_70') s += 2;
      else if (triage.p4_lvr === '70_75') s += 1;
      if (triage.p4_additional === 'yes') s += 2;
      if (s >= 7) return 'green'; if (s >= 4) return 'amber'; return 'red';
    }

    function triageShowResults() {
      const p1 = scorePillar1(), p2 = scorePillar2(), p3 = scorePillar3(), p4 = scorePillar4();
      const pillars = [p1, p2, p3, p4];
      const names = ['The Borrower', 'The Purpose', 'The Repayment', 'The Security'];
      const icons = ['üë§', 'üéØ', 'üí∞', 'üè¢'];
      const tips = {
        'The Borrower': { green: 'Strong borrower profile', amber: 'Borrower needs positioning', red: 'Weak borrower ‚Äî consider restructuring' },
        'The Purpose': { green: 'Purpose is clear and bankable', amber: 'Purpose needs better narrative', red: 'Purpose doesn\'t stack up' },
        'The Repayment': { green: 'Serviceability is solid', amber: 'Serviceability is tight', red: 'Serviceability is a problem' },
        'The Security': { green: 'Security is strong', amber: 'Security could be stronger', red: 'Security is a concern' }
      };

      let html = '';
      pillars.forEach((p, i) => {
        const cls = p === 'green' ? 'light-green' : p === 'amber' ? 'light-amber' : 'light-red';
        const emoji = p === 'green' ? 'üü¢' : p === 'amber' ? 'üü°' : 'üî¥';
        html += `<div class="pillar-result"><div class="pillar-light ${cls}">${emoji}</div><div><div class="pillar-result-text">${icons[i]} ${names[i]}</div><div class="pillar-result-detail">${tips[names[i]][p]}</div></div></div>`;
      });
      document.getElementById('pillarResults').innerHTML = html;

      const reds = pillars.filter(p => p === 'red').length;
      const greens = pillars.filter(p => p === 'green').length;
      let overall, overallLabel, overallMsg, overallColor, overallEmoji;

      if (reds >= 2) {
        overall = 'stop'; overallEmoji = '‚õî'; overallLabel = 'Significant Challenges';
        overallColor = 'var(--danger)';
        overallMsg = 'This deal has multiple red flags. Consider non-conforming options or fundamental restructuring before approaching a bank.';
      } else if (reds >= 1) {
        overall = 'red'; overallEmoji = 'üî¥'; overallLabel = 'Needs Work';
        overallColor = 'var(--danger)';
        overallMsg = 'There\'s a weak point that needs fixing. Address the red pillar before submitting ‚Äî or position it very carefully in your credit narrative.';
      } else if (greens === 4) {
        overall = 'green'; overallEmoji = 'üü¢'; overallLabel = 'Strong Deal ‚Äî Submit with Confidence';
        overallColor = 'var(--success)';
        overallMsg = 'This deal ticks all the boxes. Make sure your credit narrative tells the story clearly and you\'re good to go.';
      } else {
        overall = 'amber'; overallEmoji = 'üü°'; overallLabel = 'Workable ‚Äî Needs Positioning';
        overallColor = 'var(--warning)';
        overallMsg = 'The deal has potential but needs careful positioning. The right credit narrative and lender selection can turn amber into green.';
      }

      const ol = document.getElementById('overallLight');
      ol.className = 'overall-light ' + (overall === 'stop' ? 'light-red' : 'light-' + (overall === 'red' ? 'red' : overall));
      ol.textContent = overallEmoji;
      document.getElementById('overallLabel').textContent = overallLabel;
      document.getElementById('overallLabel').style.color = overallColor;
      document.getElementById('overallMessage').textContent = overallMsg;

      let ctaHtml = '';
      if (overall === 'green') {
        ctaHtml = `<h3>Your deal looks strong. Want to make sure it stays that way?</h3><p>A quick session can help you nail the credit narrative and pick the right lender.</p>`;
      } else if (overall === 'amber') {
        ctaHtml = `<h3>There's potential here. Learn how to turn Amber into Green.</h3><p>Structure, narrative, and lender selection ‚Äî that's where mentoring makes the difference.</p>`;
      } else {
        ctaHtml = `<h3>This deal needs work ‚Äî or a different approach. Let's talk.</h3><p>Sometimes a deal needs restructuring. Sometimes you need to know when to walk. Either way, you'll save time.</p>`;
      }
      ctaHtml += `<a href="book.html" class="btn-cta" style="display:inline-block;margin-top:16px;text-decoration:none;">Book a Mentoring Session ‚Üí</a>`;
      document.getElementById('resultCta').innerHTML = ctaHtml;

      document.getElementById('triageStep' + currentTriageStep).classList.remove('active');
      document.getElementById('triageStepResult').classList.add('active');
      currentTriageStep = 'Result';
      updateTriageProgress(5);
      document.getElementById('triage').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  </script>
</body>
</html>
